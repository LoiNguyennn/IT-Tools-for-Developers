@model IEnumerable<ITTools.Core.Models.ITool>
@{
    ViewData["Title"] = "Tools";
}

<h1>Tool Testing Interface</h1>

<link rel="stylesheet" href="~/css/tools.css" />

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <h2>Available Tools</h2>
            <ul class="list-group">
                @foreach (var tool in Model)
                {
                    <li class="list-group-item">
                        <strong>@tool.Name</strong>
                        <br />@tool.Description
                        <br /><small>Category: @tool.Category</small>
                        <button class="btn btn-sm btn-primary mt-2 select-tool"
                                data-tool="@tool.Name">
                            Test Tool
                        </button>
                    </li>
                }
            </ul>
        </div>

        <div class="col-md-6">
            <h2>Test Area</h2>
            <form id="toolForm">
                <div class="form-group">
                    <label for="toolName">Selected Tool:</label>
                    <input type="text" class="form-control" id="toolName"
                           name="toolName" readonly>
                </div>
                <div class="form-group">
                    <label for="input">Input:</label>
                    <textarea class="form-control" id="input" name="input"
                              rows="4" placeholder="Enter your input here"></textarea>
                </div>
                <button type="submit" class="btn btn-success">Execute</button>
            </form>

            <div id="resultArea" class="mt-3">
                <h3>Result:</h3>
                <pre id="result" class="border p-3"></pre>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Handle tool selection
            $('.select-tool').click(function() {
                const toolName = $(this).data('tool');
                $('#toolName').val(toolName);
                $('#result').text('');
            });

            // Handle form submission
            $('#toolForm').submit(function(e) {
                e.preventDefault();

                const toolName = $('#toolName').val();
                const input = $('#input').val();

                if (!toolName) {
                    alert('Please select a tool first');
                    return;
                }

                $.ajax({
                    url: '@Url.Action("Execute")',
                    type: 'POST',
                    data: {
                        toolName: toolName,
                        input: input
                    },
                    success: function(response) {
                        $('#result').text(JSON.stringify(response.result, null, 2));
                    },
                    error: function(xhr) {
                        $('#result').text('Error: ' + xhr.responseText);
                    }
                });
            });
        });
    </script>
}